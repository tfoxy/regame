!function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var o={};e.m=t,e.c=o,e.i=function(t){return t},e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=16)}([function(t,e,o){"use strict";function n(t,e){var o=e.x-t.x,n=e.y-t.y;return Math.atan2(n,o)}function i(t,e){return{x:t*Math.cos(e),y:t*Math.sin(e)}}Object.defineProperty(e,"__esModule",{value:!0}),e.NULL_VECTOR={x:0,y:0},e.NAN_VECTOR={x:NaN,y:NaN},e.angleBetweenTwoVectors=n,e.polarToCartesian=i},function(t,e,o){var n,i;/** @preserve SAT.js - Version 0.6.0 - Copyright 2012 - 2016 - Jim Riecken <jimr@jimr.ca> - released under the MIT License. https://github.com/jriecken/sat-js */
!function(r,s){"use strict";n=s,void 0!==(i="function"==typeof n?n.call(e,o,e,t):n)&&(t.exports=i)}(0,function(){"use strict";function t(t,e){this.x=t||0,this.y=e||0}function e(e,o){this.pos=e||new t,this.r=o||0}function o(e,o){this.pos=e||new t,this.angle=0,this.offset=new t,this.setPoints(o||[])}function n(e,o,n){this.pos=e||new t,this.w=o||0,this.h=n||0}function i(){this.a=null,this.b=null,this.overlapN=new t,this.overlapV=new t,this.clear()}function r(t,e,o){for(var n=Number.MAX_VALUE,i=-Number.MAX_VALUE,r=t.length,s=0;s<r;s++){var a=t[s].dot(e);a<n&&(n=a),a>i&&(i=a)}o[0]=n,o[1]=i}function s(t,e,o,n,i,s){var a=g.pop(),p=g.pop(),h=d.pop().copy(e).sub(t),u=h.dot(i);if(r(o,i,a),r(n,i,p),p[0]+=u,p[1]+=u,a[0]>p[1]||p[0]>a[1])return d.push(h),g.push(a),g.push(p),!0;if(s){var l=0;if(a[0]<p[0])if(s.aInB=!1,a[1]<p[1])l=a[1]-p[0],s.bInA=!1;else{var c=a[1]-p[0],f=p[1]-a[0];l=c<f?c:-f}else if(s.bInA=!1,a[1]>p[1])l=a[0]-p[1],s.aInB=!1;else{var c=a[1]-p[0],f=p[1]-a[0];l=c<f?c:-f}var y=Math.abs(l);y<s.overlap&&(s.overlap=y,s.overlapN.copy(i),l<0&&s.overlapN.reverse())}return d.push(h),g.push(a),g.push(p),!1}function a(t,e){var o=t.len2(),n=e.dot(t);return n<0?b:n>o?P:w}function p(t,e){var o=d.pop().copy(t).sub(e.pos),n=e.r*e.r,i=o.len2();return d.push(o),i<=n}function h(t,e){x.pos.copy(t),m.clear();var o=f(x,e,m);return o&&(o=m.aInB),o}function u(t,e,o){var n=d.pop().copy(e.pos).sub(t.pos),i=t.r+e.r,r=i*i,s=n.len2();if(s>r)return d.push(n),!1;if(o){var a=Math.sqrt(s);o.a=t,o.b=e,o.overlap=i-a,o.overlapN.copy(n.normalize()),o.overlapV.copy(n).scale(o.overlap),o.aInB=t.r<=e.r&&a<=e.r-t.r,o.bInA=e.r<=t.r&&a<=t.r-e.r}return d.push(n),!0}function l(t,e,o){for(var n=d.pop().copy(e.pos).sub(t.pos),i=e.r,r=i*i,s=t.calcPoints,p=s.length,h=d.pop(),u=d.pop(),l=0;l<p;l++){var c=l===p-1?0:l+1,f=0===l?p-1:l-1,y=0,v=null;h.copy(t.edges[l]),u.copy(n).sub(s[l]),o&&u.len2()>r&&(o.aInB=!1);var g=a(h,u);if(g===b){h.copy(t.edges[f]);var m=d.pop().copy(n).sub(s[f]);if((g=a(h,m))===P){var x=u.len();if(x>i)return d.push(n),d.push(h),d.push(u),d.push(m),!1;o&&(o.bInA=!1,v=u.normalize(),y=i-x)}d.push(m)}else if(g===P){if(h.copy(t.edges[c]),u.copy(n).sub(s[c]),(g=a(h,u))===b){var x=u.len();if(x>i)return d.push(n),d.push(h),d.push(u),!1;o&&(o.bInA=!1,v=u.normalize(),y=i-x)}}else{var w=h.perp().normalize(),x=u.dot(w),_=Math.abs(x);if(x>0&&_>i)return d.push(n),d.push(w),d.push(u),!1;o&&(v=w,y=i-x,(x>=0||y<2*i)&&(o.bInA=!1))}v&&o&&Math.abs(y)<Math.abs(o.overlap)&&(o.overlap=y,o.overlapN.copy(v))}return o&&(o.a=t,o.b=e,o.overlapV.copy(o.overlapN).scale(o.overlap)),d.push(n),d.push(h),d.push(u),!0}function c(t,e,o){var n=l(e,t,o);if(n&&o){var i=o.a,r=o.aInB;o.overlapN.reverse(),o.overlapV.reverse(),o.a=o.b,o.b=i,o.aInB=o.bInA,o.bInA=r}return n}function f(t,e,o){for(var n=t.calcPoints,i=n.length,r=e.calcPoints,a=r.length,p=0;p<i;p++)if(s(t.pos,e.pos,n,r,t.normals[p],o))return!1;for(var p=0;p<a;p++)if(s(t.pos,e.pos,n,r,e.normals[p],o))return!1;return o&&(o.a=t,o.b=e,o.overlapV.copy(o.overlapN).scale(o.overlap)),!0}var y={};y.Vector=t,y.V=t,t.prototype.copy=t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.clone=t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.perp=t.prototype.perp=function(){var t=this.x;return this.x=this.y,this.y=-t,this},t.prototype.rotate=t.prototype.rotate=function(t){var e=this.x,o=this.y;return this.x=e*Math.cos(t)-o*Math.sin(t),this.y=e*Math.sin(t)+o*Math.cos(t),this},t.prototype.reverse=t.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.normalize=t.prototype.normalize=function(){var t=this.len();return t>0&&(this.x=this.x/t,this.y=this.y/t),this},t.prototype.add=t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.sub=t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.scale=t.prototype.scale=function(t,e){return this.x*=t,this.y*=e||t,this},t.prototype.project=t.prototype.project=function(t){var e=this.dot(t)/t.len2();return this.x=e*t.x,this.y=e*t.y,this},t.prototype.projectN=t.prototype.projectN=function(t){var e=this.dot(t);return this.x=e*t.x,this.y=e*t.y,this},t.prototype.reflect=t.prototype.reflect=function(t){var e=this.x,o=this.y;return this.project(t).scale(2),this.x-=e,this.y-=o,this},t.prototype.reflectN=t.prototype.reflectN=function(t){var e=this.x,o=this.y;return this.projectN(t).scale(2),this.x-=e,this.y-=o,this},t.prototype.dot=t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.len2=t.prototype.len2=function(){return this.dot(this)},t.prototype.len=t.prototype.len=function(){return Math.sqrt(this.len2())},y.Circle=e,e.prototype.getAABB=e.prototype.getAABB=function(){var e=this.r;return new n(this.pos.clone().sub(new t(e,e)),2*e,2*e).toPolygon()},y.Polygon=o,o.prototype.setPoints=o.prototype.setPoints=function(e){if(!this.points||this.points.length!==e.length){var o,n=this.calcPoints=[],i=this.edges=[],r=this.normals=[];for(o=0;o<e.length;o++)n.push(new t),i.push(new t),r.push(new t)}return this.points=e,this._recalc(),this},o.prototype.setAngle=o.prototype.setAngle=function(t){return this.angle=t,this._recalc(),this},o.prototype.setOffset=o.prototype.setOffset=function(t){return this.offset=t,this._recalc(),this},o.prototype.rotate=o.prototype.rotate=function(t){for(var e=this.points,o=e.length,n=0;n<o;n++)e[n].rotate(t);return this._recalc(),this},o.prototype.translate=o.prototype.translate=function(t,e){for(var o=this.points,n=o.length,i=0;i<n;i++)o[i].x+=t,o[i].y+=e;return this._recalc(),this},o.prototype._recalc=function(){var t,e=this.calcPoints,o=this.edges,n=this.normals,i=this.points,r=this.offset,s=this.angle,a=i.length;for(t=0;t<a;t++){var p=e[t].copy(i[t]);p.x+=r.x,p.y+=r.y,0!==s&&p.rotate(s)}for(t=0;t<a;t++){var h=e[t],u=t<a-1?e[t+1]:e[0],l=o[t].copy(u).sub(h);n[t].copy(l).perp().normalize()}return this},o.prototype.getAABB=o.prototype.getAABB=function(){for(var e=this.calcPoints,o=e.length,i=e[0].x,r=e[0].y,s=e[0].x,a=e[0].y,p=1;p<o;p++){var h=e[p];h.x<i?i=h.x:h.x>s&&(s=h.x),h.y<r?r=h.y:h.y>a&&(a=h.y)}return new n(this.pos.clone().add(new t(i,r)),s-i,a-r).toPolygon()},y.Box=n,n.prototype.toPolygon=n.prototype.toPolygon=function(){var e=this.pos,n=this.w,i=this.h;return new o(new t(e.x,e.y),[new t,new t(n,0),new t(n,i),new t(0,i)])},y.Response=i,i.prototype.clear=i.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this};for(var d=[],v=0;v<10;v++)d.push(new t);for(var g=[],v=0;v<5;v++)g.push([]);var m=new i,x=new n(new t,1e-6,1e-6).toPolygon();y.isSeparatingAxis=s;var b=-1,w=0,P=1;return y.pointInCircle=p,y.pointInPolygon=h,y.testCircleCircle=u,y.testPolygonCircle=l,y.testCirclePolygon=c,y.testPolygonPolygon=f,y})},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(0),i=function(){function t(){this.position={x:NaN,y:NaN},this.angle=0,this.speed=n.NULL_VECTOR,this.maxSpeedModule=0}return t.prototype.setPosition=function(t,e){this.position.x=t,this.position.y=e},t.prototype.setAngle=function(t){this.angle=t},t.prototype.setMovementDirection=function(t,e){this.speed.x=t*this.maxSpeedModule,this.speed.y=e*this.maxSpeedModule},t.prototype.resetPosition=function(){this.setPosition(NaN,NaN)},t.prototype.isOutOfGame=function(){return Number.isNaN(this.position.x)},t}();e.default=i},function(t,e,o){var n=o(7);"string"==typeof n&&(n=[[t.i,n,""]]);var i={};i.transform=void 0;o(9)(n,i);n.locals&&(t.exports=n.locals)},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(0),i=1/Math.sqrt(2),r={x:0,y:-1},s={x:0,y:1},a={x:-1,y:0},p={x:1,y:0},h={x:-i,y:-i},u={x:i,y:-i},l={x:-i,y:i},c={x:i,y:i},f={NX:r,SX:s,XW:a,XE:p,NW:h,NE:u,SW:l,SE:c,XX:n.NULL_VECTOR},y={FORWARD:"w",BACKWARD:"s",LEFT:"a",RIGHT:"d"},d=function(){function t(t){void 0===t&&(t=y),this.keyBindings=t,this.soldier=null,this.currentKeys=[],this.currentKeySet=new Set,this.keyboardListener=this.keyboardListener.bind(this),this.mouseListener=this.mouseListener.bind(this)}return t.prototype.setSoldier=function(t){if(this.soldier)throw new Error("Soldier already set for Controls");this.soldier=t,window.addEventListener("keydown",this.keyboardListener),window.addEventListener("keyup",this.keyboardListener)},t.prototype.setCanvas=function(t){t.addEventListener("mousemove",this.mouseListener),t.addEventListener("mousedown",this.mouseListener),t.addEventListener("mouseup",this.mouseListener)},t.prototype.keyboardListener=function(t){var e=t.key,o=t.type;if("keydown"!==o||this.currentKeySet.has(e)){if("keyup"===o&&this.currentKeySet.delete(e)){var n=this.currentKeys.indexOf(e);this.currentKeys.splice(n,1)}}else this.currentKeys.push(e),this.currentKeySet.add(e);this.updateCurrentDirection()},t.prototype.mouseListener=function(t){var e=t.type;"mousemove"===e?this.soldier.setFocusPoint(t.offsetX,t.offsetY):"mousedown"===e?this.soldier.startShooting():"mouseup"===e&&this.soldier.stopShooting()},t.prototype.updateCurrentDirection=function(){var t=this.keyBindings,e=t.FORWARD,o=t.BACKWARD,n=t.LEFT,i=t.RIGHT,r="X",s="X";this.currentKeys.forEach(function(t){switch(t){case e:s="N";break;case o:s="S";break;case n:r="W";break;case i:r="E"}});var a=f[s+r];this.soldier.setMovementDirection(a.x,a.y)},t}();e.default=d},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(1),i=o(14),r=o(13),s=o(15),a=o(12),p=new n.Response,h=function(){function t(){this.map=new a.default,this.entities=[],this.tickrate=128,this.loopInterval=1e3/this.tickrate,this.player=null,this.soldiers=[],this.bullets=[]}return t.prototype.start=function(){if(this.loop!==t.prototype.loop)throw new Error("Game already started");this.loadMap(),this.startRound(),this.loop=this.loop.bind(this),this.loop()},t.prototype.loadMap=function(){this.walls=this.map.walls.map(function(t){return new s.default(t)}),(t=this.entities).push.apply(t,this.walls);var t},t.prototype.startRound=function(){var t=this.addSoldier(this.map.spawnPoints[0]);this.player=t,this.addSoldier(this.map.spawnPoints[1]).color="red"},t.prototype.addSoldier=function(t){var e=new i.default;return e.fov.setMap(this.map),e.setPosition(t.x,t.y),e.setAngle(t.angle),this.entities.push(e),this.soldiers.push(e),e},t.prototype.removeEntity=function(t,e){t.resetPosition();var o=e.indexOf(t);o>=0&&e.splice(o,1);var n=this.entities.indexOf(t);n>=0&&this.entities.splice(n,1)},t.prototype.loop=function(){this.soldiers.forEach(this.loopSoldier,this),this.bullets.forEach(this.loopBullet,this),setTimeout(this.loop,this.loopInterval)},t.prototype.moveEntity=function(t){var e=t.position,o=e.x+t.speed.x/this.tickrate,n=e.y+t.speed.y/this.tickrate;o=Math.max(o,0),o=Math.min(o,this.map.width),n=Math.max(n,0),n=Math.min(n,this.map.height),t.setPosition(o,n)},t.prototype.loopSoldier=function(t){(t.speed.x||t.speed.y)&&(this.moveEntity(t),this.checkSoldierCollisions(t)),this.makeShot(t)},t.prototype.loopBullet=function(t){this.moveEntity(t),this.checkBulletCollisions(t)},t.prototype.checkSoldierCollisions=function(t){var e=!1,o=0;do{o+=1,e=this.walls.some(function(e){var o=n.testPolygonCircle(e.sat,t.sat,p)&&Boolean(p.overlap);return o&&t.setPosition(t.position.x+p.overlapV.x,t.position.y+p.overlapV.y),p.clear(),o})}while(e&&o<10)},t.prototype.checkBulletCollisions=function(t){if(this.walls.find(function(e){return n.testPolygonCircle(e.sat,t.sat)}))return void this.removeEntity(t,this.bullets);var e=this.soldiers.find(function(e){return n.testCircleCircle(e.sat,t.sat)});return e?(this.removeEntity(t,this.bullets),void this.removeEntity(e,this.soldiers)):void 0},t.prototype.makeShot=function(t){if(t.shooting){var e=new r.default;e.fireFromSoldier(t),this.bullets.push(e),this.entities.push(e)}},t}();e.default=h},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.start=function(t){if(this.game)throw new Error("Renderer is already rendering a Game");this.game=t;var e=document.createElement("canvas");e.width=this.game.map.width,e.height=this.game.map.height,this.canvas=e,this.canvasContext=e.getContext("2d"),this.render=this.render.bind(this),this.render()},t.prototype.render=function(){this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawMap(),this.drawFogOfWar(),this.drawSoldiers(),this.drawBullets(),window.requestAnimationFrame(this.render)},t.prototype.drawEntity=function(t){if(!t.isOutOfGame()){var e=t.canvas,o=t.position,n=t.angle,i=this.canvasContext,r=this.game.map,s=(r.width,r.height,o.x),a=o.y;i.translate(s,a),i.rotate(n),i.drawImage(e,-e.width/2,-e.height/2),i.rotate(-n),i.translate(-s,-a)}},t.prototype.drawMap=function(){this.game.walls.forEach(this.drawEntity,this)},t.prototype.drawSoldiers=function(){var t=this.canvasContext;t.globalCompositeOperation="source-over",this.drawEntity(this.game.player),t.globalCompositeOperation="destination-over",this.game.soldiers.forEach(this.drawEntity,this)},t.prototype.drawBullets=function(){this.canvasContext.globalCompositeOperation="destination-over",this.game.bullets.forEach(this.drawEntity,this)},t.prototype.drawFogOfWar=function(){var t=this.game.player.fov.intersects,e=this.canvasContext;if(!t.length)return e.globalCompositeOperation="source-over",e.fillStyle="black",void e.fillRect(0,0,this.canvas.width,this.canvas.height);e.beginPath(),e.moveTo(t[0].x,t[0].y);for(var o=1;o<t.length;o+=1){var n=t[o];e.lineTo(n.x,n.y)}e.lineTo(t[0].x,t[0].y),e.lineWidth=10,e.globalCompositeOperation="destination-in",e.stroke(),e.fillStyle="black",e.globalCompositeOperation="destination-over",e.fillRect(0,0,this.canvas.width,this.canvas.height),e.beginPath(),e.moveTo(t[0].x,t[0].y);for(var o=1;o<t.length;o+=1){var n=t[o];e.lineTo(n.x,n.y)}e.globalCompositeOperation="destination-out",e.fill()},t.prototype.drawDebugFov=function(t){var e=t.fov.intersects,o=this.canvasContext;o.fillStyle="#dd3838",o.beginPath(),o.moveTo(e[0].x,e[0].y);for(var n=1;n<e.length;n+=1){var i=e[n];o.lineTo(i.x,i.y)}o.fill(),o.strokeStyle="#f55";for(var n=0;n<e.length;n+=1){var i=e[n];o.beginPath(),o.moveTo(t.position.x,t.position.y),o.lineTo(i.x,i.y),o.stroke()}},t}();e.default=n},function(t,e,o){e=t.exports=o(8)(void 0),e.push([t.i,"body{margin:0;overflow:hidden;background:gray;text-align:center;position:absolute;height:100%;width:100%;display:flex}canvas{background:#e0e0e0;margin:auto}",""])},function(t,e){function o(t,e){var o=t[1]||"",i=t[3];if(!i)return o;if(e&&"function"==typeof btoa){var r=n(i);return[o].concat(i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"})).concat([r]).join("\n")}return[o].join("\n")}function n(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=o(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,o){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(n[r]=!0)}for(i=0;i<t.length;i++){var s=t[i];"number"==typeof s[0]&&n[s[0]]||(o&&!s[2]?s[2]=o:o&&(s[2]="("+s[2]+") and ("+o+")"),e.push(s))}},e}},function(t,e,o){function n(t,e){for(var o=0;o<t.length;o++){var n=t[o],i=y[n.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](n.parts[r]);for(;r<n.parts.length;r++)i.parts.push(u(n.parts[r],e))}else{for(var s=[],r=0;r<n.parts.length;r++)s.push(u(n.parts[r],e));y[n.id]={id:n.id,refs:1,parts:s}}}}function i(t,e){for(var o=[],n={},i=0;i<t.length;i++){var r=t[i],s=e.base?r[0]+e.base:r[0],a=r[1],p=r[2],h=r[3],u={css:a,media:p,sourceMap:h};n[s]?n[s].parts.push(u):o.push(n[s]={id:s,parts:[u]})}return o}function r(t,e){var o=v(t.insertInto);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=x[x.length-1];if("top"===t.insertAt)n?n.nextSibling?o.insertBefore(e,n.nextSibling):o.appendChild(e):o.insertBefore(e,o.firstChild),x.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");o.appendChild(e)}}function s(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=x.indexOf(t);e>=0&&x.splice(e,1)}function a(t){var e=document.createElement("style");return t.attrs.type="text/css",h(e,t.attrs),r(t,e),e}function p(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",h(e,t.attrs),r(t,e),e}function h(t,e){Object.keys(e).forEach(function(o){t.setAttribute(o,e[o])})}function u(t,e){var o,n,i,r;if(e.transform&&t.css){if(!(r=e.transform(t.css)))return function(){};t.css=r}if(e.singleton){var h=m++;o=g||(g=a(e)),n=l.bind(null,o,h,!1),i=l.bind(null,o,h,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(o=p(e),n=f.bind(null,o,e),i=function(){s(o),o.href&&URL.revokeObjectURL(o.href)}):(o=a(e),n=c.bind(null,o),i=function(){s(o)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else i()}}function l(t,e,o,n){var i=o?"":n.css;if(t.styleSheet)t.styleSheet.cssText=w(e,i);else{var r=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}function c(t,e){var o=e.css,n=e.media;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}function f(t,e,o){var n=o.css,i=o.sourceMap,r=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||r)&&(n=b(n)),i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([n],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}var y={},d=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),v=function(t){var e={};return function(o){return void 0===e[o]&&(e[o]=t.call(this,o)),e[o]}}(function(t){return document.querySelector(t)}),g=null,m=0,x=[],b=o(10);t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},e.attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||(e.singleton=d()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var o=i(t,e);return n(o,e),function(t){for(var r=[],s=0;s<o.length;s++){var a=o[s],p=y[a.id];p.refs--,r.push(p)}if(t){n(i(t,e),e)}for(var s=0;s<r.length;s++){var p=r[s];if(0===p.refs){for(var h=0;h<p.parts.length;h++)p.parts[h]();delete y[p.id]}}}};var w=function(){var t=[];return function(e,o){return t[e]=o,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var o=e.protocol+"//"+e.host,n=o+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i))return t;var r;return r=0===i.indexOf("//")?i:0===i.indexOf("/")?o+i:n+i.replace(/^\.\//,""),"url("+JSON.stringify(r)+")"})}},function(t,e,o){"use strict";function n(t,e){var o=t.a.x,n=t.a.y,i=t.b.x-t.a.x,r=t.b.y-t.a.y,s=e.a.x,a=e.a.y,p=e.b.x-e.a.x,h=e.b.y-e.a.y,u=Math.sqrt(i*i+r*r),l=Math.sqrt(p*p+h*h);if(i/u==p/l&&r/u==h/l)return null;var c=(i*(a-n)+r*(o-s))/(p*r-h*i),f=(s+p*c-o)/i;return f<0?null:c<0||c>1?null:{x:o+i*f,y:n+r*f,param:f}}Object.defineProperty(e,"__esModule",{value:!0});var i=o(0),r=(Math.PI,Math.PI/4),s=function(){function t(t){this.entity=t}return t.prototype.setMap=function(t){this.map=t},t.prototype.update=function(){var t=this;if(this.entity.isOutOfGame())return void(this.intersects=[]);var e=this.map.wallPoints,o=this.entity.angle-r,s=this.entity.angle+r,a=this.entity.angle+(this.entity.angle<0?Math.PI:-Math.PI),p=[o,s];e.forEach(function(e,n){var r=i.angleBetweenTwoVectors(t.entity.position,e);a>0&&r>a?r-=2*Math.PI:a<0&&r<a&&(r+=2*Math.PI),r<=s&&r>=o&&p.push(r-1e-5,r,r+1e-5)});var h=[{x:this.entity.position.x,y:this.entity.position.y,angle:o-1e-5},{x:this.entity.position.x,y:this.entity.position.y,angle:s+1e-5}];p.forEach(function(e){var o=Math.cos(e),i=Math.sin(e),r=t.entity.position,s={a:{x:r.x,y:r.y},b:{x:r.x+o,y:r.y+i}},a=null;t.map.wallSegments.forEach(function(t){var e=n(s,t);e&&(!a||e.param<a.param)&&(a=e)}),a&&(a.angle=e,h.push(a))}),h.sort(function(t,e){return t.angle-e.angle}),this.intersects=h},t}();e.default=s},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){var t=this;this.height=800,this.width=800,this.spawnPoints=[{x:50,y:50,angle:0},{x:160,y:50,angle:Math.PI/2}],this.walls=[[{x:400,y:400},{x:600,y:400},{x:500,y:450}],[{x:100,y:0},{x:120,y:0},{x:120,y:200},{x:100,y:200}],[{x:0,y:200},{x:200,y:250},{x:0,y:250}]];var e={x:0,y:0},o={x:this.width,y:0},n={x:this.width,y:this.height},i={x:0,y:this.height};this.walls.push([e,o],[o,n],[n,i],[i,e]);var r=new Set;this.wallPoints=[],this.walls.forEach(function(e){e.forEach(function(e){var o=e.x+","+e.y;r.has(o)||(r.add(o),t.wallPoints.push(e))})}),this.wallSegments=[],this.walls.forEach(function(e){for(var o=1;o<e.length;o+=1)t.wallSegments.push({a:e[o-1],b:e[o]});t.wallSegments.push({a:e[e.length-1],b:e[0]})})}return t}();e.default=n},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=o(1),r=o(2),s=o(0),a=function(t){function e(){var e=t.call(this)||this;return e.position={x:NaN,y:NaN},e.speed={x:NaN,y:NaN},e.radius=3,e.maxSpeedModule=1500,e.sat=new i.Circle(new i.Vector,e.radius),e}return n(e,t),e.prototype.fireFromSoldier=function(t){this.setAngle(t.angle);var e=s.polarToCartesian(t.radius-this.radius,this.angle);this.setPosition(t.position.x+e.x,t.position.y+e.y);var o=s.polarToCartesian(1,this.angle);this.setMovementDirection(o.x,o.y)},e.prototype.setPosition=function(e,o){t.prototype.setPosition.call(this,e,o),this.sat.pos.x=e,this.sat.pos.y=o},Object.defineProperty(e.prototype,"canvas",{get:function(){var t=this._canvas;if(!t){var e=this,o=e.radius;e.position;t=document.createElement("canvas"),t.width=2*o,t.height=2*o;var n=t.getContext("2d");n.beginPath(),n.arc(o,o,o,0,2*Math.PI,!1),n.fillStyle="orange",n.fill(),this._canvas=t}return this._canvas},enumerable:!0,configurable:!0}),e}(r.default);e.default=a},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=o(1),r=o(0),s=o(2),a=o(11),p=function(t){function e(){var e=t.call(this)||this;return e.position={x:NaN,y:NaN},e.speed={x:0,y:0},e.radius=10,e.maxSpeedModule=250,e.color="blue",e.focusPoint={x:NaN,y:NaN},e.sat=new i.Circle(new i.Vector,e.radius),e._fov=new a.default(e),e.fovUpdatePending=!1,e.shooting=!1,e}return n(e,t),e.prototype.setAngleByFocusPoint=function(){if(!Number.isNaN(this.focusPoint.x)){var t=r.angleBetweenTwoVectors(this.position,this.focusPoint);this.setAngle(t)}},e.prototype.setPosition=function(e,o){t.prototype.setPosition.call(this,e,o),this.sat.pos.x=e,this.sat.pos.y=o,this.setAngleByFocusPoint(),this.fovUpdatePending=!0},e.prototype.setAngle=function(e){t.prototype.setAngle.call(this,e),this.fovUpdatePending=!0},e.prototype.setFocusPoint=function(t,e){this.focusPoint.x=t,this.focusPoint.y=e,this.setAngleByFocusPoint()},e.prototype.startShooting=function(){this.shooting=!0},e.prototype.stopShooting=function(){this.shooting=!1},Object.defineProperty(e.prototype,"fov",{get:function(){return this.fovUpdatePending&&(this._fov.update(),this.fovUpdatePending=!1),this._fov},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvas",{get:function(){var t=this._canvas;if(!t){var e=this,o=e.radius;e.position;t=document.createElement("canvas"),t.width=2*o,t.height=2*o;var n=t.getContext("2d");n.beginPath(),n.arc(o,o,o,0,2*Math.PI,!1),n.fillStyle=this.color,n.fill(),n.beginPath(),n.moveTo(2*o,o),n.lineTo(o,o),n.strokeStyle="black",n.lineWidth=3,n.stroke(),this._canvas=t}return this._canvas},enumerable:!0,configurable:!0}),e}(s.default);e.default=p},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=o(1),r=o(2),s=function(t){function e(e){var o=t.call(this)||this,n=e.map(function(t){return t.x}),r=e.map(function(t){return t.y});return o.minX=Math.min.apply(Math,n),o.maxX=Math.max.apply(Math,n),o.minY=Math.min.apply(Math,r),o.maxY=Math.max.apply(Math,r),o.position={x:(o.maxX+o.minX)/2,y:(o.maxY+o.minY)/2},o.points=e,o.sat=new i.Polygon(new i.Vector,e.map(function(t){return new i.Vector(t.x,t.y)})),o}return n(e,t),Object.defineProperty(e.prototype,"canvas",{get:function(){var t=this,e=this._canvas;if(!e){e=document.createElement("canvas"),e.width=this.maxX-this.minX,e.height=this.maxY-this.minY;var o=e.getContext("2d");o.beginPath(),o.moveTo(this.points[0].x-this.minX,this.points[0].y-this.minY),this.points.forEach(function(e){return o.lineTo(e.x-t.minX,e.y-t.minY)}),o.fillStyle="#AAA",o.fill(),this._canvas=e}return this._canvas},enumerable:!0,configurable:!0}),e}(r.default);e.default=s},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(5),i=o(6),r=o(4);o(3);var s=new n.default;s.start();var a=new r.default;a.setSoldier(s.player);var p=new i.default;p.start(s),a.setCanvas(p.canvas),document.body.appendChild(p.canvas)}]);