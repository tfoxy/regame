!function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=15)}([function(t,e,n){var o,i;/** @preserve SAT.js - Version 0.6.0 - Copyright 2012 - 2016 - Jim Riecken <jimr@jimr.ca> - released under the MIT License. https://github.com/jriecken/sat-js */
!function(r,s){"use strict";o=s,void 0!==(i="function"==typeof o?o.call(e,n,e,t):o)&&(t.exports=i)}(0,function(){"use strict";function t(t,e){this.x=t||0,this.y=e||0}function e(e,n){this.pos=e||new t,this.r=n||0}function n(e,n){this.pos=e||new t,this.angle=0,this.offset=new t,this.setPoints(n||[])}function o(e,n,o){this.pos=e||new t,this.w=n||0,this.h=o||0}function i(){this.a=null,this.b=null,this.overlapN=new t,this.overlapV=new t,this.clear()}function r(t,e,n){for(var o=Number.MAX_VALUE,i=-Number.MAX_VALUE,r=t.length,s=0;s<r;s++){var a=t[s].dot(e);a<o&&(o=a),a>i&&(i=a)}n[0]=o,n[1]=i}function s(t,e,n,o,i,s){var a=x.pop(),p=x.pop(),u=v.pop().copy(e).sub(t),h=u.dot(i);if(r(n,i,a),r(o,i,p),p[0]+=h,p[1]+=h,a[0]>p[1]||p[0]>a[1])return v.push(u),x.push(a),x.push(p),!0;if(s){var c=0;if(a[0]<p[0])if(s.aInB=!1,a[1]<p[1])c=a[1]-p[0],s.bInA=!1;else{var l=a[1]-p[0],f=p[1]-a[0];c=l<f?l:-f}else if(s.bInA=!1,a[1]>p[1])c=a[0]-p[1],s.aInB=!1;else{var l=a[1]-p[0],f=p[1]-a[0];c=l<f?l:-f}var y=Math.abs(c);y<s.overlap&&(s.overlap=y,s.overlapN.copy(i),c<0&&s.overlapN.reverse())}return v.push(u),x.push(a),x.push(p),!1}function a(t,e){var n=t.len2(),o=e.dot(t);return o<0?b:o>n?P:w}function p(t,e){var n=v.pop().copy(t).sub(e.pos),o=e.r*e.r,i=n.len2();return v.push(n),i<=o}function u(t,e){g.pos.copy(t),m.clear();var n=f(g,e,m);return n&&(n=m.aInB),n}function h(t,e,n){var o=v.pop().copy(e.pos).sub(t.pos),i=t.r+e.r,r=i*i,s=o.len2();if(s>r)return v.push(o),!1;if(n){var a=Math.sqrt(s);n.a=t,n.b=e,n.overlap=i-a,n.overlapN.copy(o.normalize()),n.overlapV.copy(o).scale(n.overlap),n.aInB=t.r<=e.r&&a<=e.r-t.r,n.bInA=e.r<=t.r&&a<=t.r-e.r}return v.push(o),!0}function c(t,e,n){for(var o=v.pop().copy(e.pos).sub(t.pos),i=e.r,r=i*i,s=t.calcPoints,p=s.length,u=v.pop(),h=v.pop(),c=0;c<p;c++){var l=c===p-1?0:c+1,f=0===c?p-1:c-1,y=0,d=null;u.copy(t.edges[c]),h.copy(o).sub(s[c]),n&&h.len2()>r&&(n.aInB=!1);var x=a(u,h);if(x===b){u.copy(t.edges[f]);var m=v.pop().copy(o).sub(s[f]);if((x=a(u,m))===P){var g=h.len();if(g>i)return v.push(o),v.push(u),v.push(h),v.push(m),!1;n&&(n.bInA=!1,d=h.normalize(),y=i-g)}v.push(m)}else if(x===P){if(u.copy(t.edges[l]),h.copy(o).sub(s[l]),(x=a(u,h))===b){var g=h.len();if(g>i)return v.push(o),v.push(u),v.push(h),!1;n&&(n.bInA=!1,d=h.normalize(),y=i-g)}}else{var w=u.perp().normalize(),g=h.dot(w),M=Math.abs(g);if(g>0&&M>i)return v.push(o),v.push(w),v.push(h),!1;n&&(d=w,y=i-g,(g>=0||y<2*i)&&(n.bInA=!1))}d&&n&&Math.abs(y)<Math.abs(n.overlap)&&(n.overlap=y,n.overlapN.copy(d))}return n&&(n.a=t,n.b=e,n.overlapV.copy(n.overlapN).scale(n.overlap)),v.push(o),v.push(u),v.push(h),!0}function l(t,e,n){var o=c(e,t,n);if(o&&n){var i=n.a,r=n.aInB;n.overlapN.reverse(),n.overlapV.reverse(),n.a=n.b,n.b=i,n.aInB=n.bInA,n.bInA=r}return o}function f(t,e,n){for(var o=t.calcPoints,i=o.length,r=e.calcPoints,a=r.length,p=0;p<i;p++)if(s(t.pos,e.pos,o,r,t.normals[p],n))return!1;for(var p=0;p<a;p++)if(s(t.pos,e.pos,o,r,e.normals[p],n))return!1;return n&&(n.a=t,n.b=e,n.overlapV.copy(n.overlapN).scale(n.overlap)),!0}var y={};y.Vector=t,y.V=t,t.prototype.copy=t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.clone=t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.perp=t.prototype.perp=function(){var t=this.x;return this.x=this.y,this.y=-t,this},t.prototype.rotate=t.prototype.rotate=function(t){var e=this.x,n=this.y;return this.x=e*Math.cos(t)-n*Math.sin(t),this.y=e*Math.sin(t)+n*Math.cos(t),this},t.prototype.reverse=t.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.normalize=t.prototype.normalize=function(){var t=this.len();return t>0&&(this.x=this.x/t,this.y=this.y/t),this},t.prototype.add=t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.sub=t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.scale=t.prototype.scale=function(t,e){return this.x*=t,this.y*=e||t,this},t.prototype.project=t.prototype.project=function(t){var e=this.dot(t)/t.len2();return this.x=e*t.x,this.y=e*t.y,this},t.prototype.projectN=t.prototype.projectN=function(t){var e=this.dot(t);return this.x=e*t.x,this.y=e*t.y,this},t.prototype.reflect=t.prototype.reflect=function(t){var e=this.x,n=this.y;return this.project(t).scale(2),this.x-=e,this.y-=n,this},t.prototype.reflectN=t.prototype.reflectN=function(t){var e=this.x,n=this.y;return this.projectN(t).scale(2),this.x-=e,this.y-=n,this},t.prototype.dot=t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.len2=t.prototype.len2=function(){return this.dot(this)},t.prototype.len=t.prototype.len=function(){return Math.sqrt(this.len2())},y.Circle=e,e.prototype.getAABB=e.prototype.getAABB=function(){var e=this.r;return new o(this.pos.clone().sub(new t(e,e)),2*e,2*e).toPolygon()},y.Polygon=n,n.prototype.setPoints=n.prototype.setPoints=function(e){if(!this.points||this.points.length!==e.length){var n,o=this.calcPoints=[],i=this.edges=[],r=this.normals=[];for(n=0;n<e.length;n++)o.push(new t),i.push(new t),r.push(new t)}return this.points=e,this._recalc(),this},n.prototype.setAngle=n.prototype.setAngle=function(t){return this.angle=t,this._recalc(),this},n.prototype.setOffset=n.prototype.setOffset=function(t){return this.offset=t,this._recalc(),this},n.prototype.rotate=n.prototype.rotate=function(t){for(var e=this.points,n=e.length,o=0;o<n;o++)e[o].rotate(t);return this._recalc(),this},n.prototype.translate=n.prototype.translate=function(t,e){for(var n=this.points,o=n.length,i=0;i<o;i++)n[i].x+=t,n[i].y+=e;return this._recalc(),this},n.prototype._recalc=function(){var t,e=this.calcPoints,n=this.edges,o=this.normals,i=this.points,r=this.offset,s=this.angle,a=i.length;for(t=0;t<a;t++){var p=e[t].copy(i[t]);p.x+=r.x,p.y+=r.y,0!==s&&p.rotate(s)}for(t=0;t<a;t++){var u=e[t],h=t<a-1?e[t+1]:e[0],c=n[t].copy(h).sub(u);o[t].copy(c).perp().normalize()}return this},n.prototype.getAABB=n.prototype.getAABB=function(){for(var e=this.calcPoints,n=e.length,i=e[0].x,r=e[0].y,s=e[0].x,a=e[0].y,p=1;p<n;p++){var u=e[p];u.x<i?i=u.x:u.x>s&&(s=u.x),u.y<r?r=u.y:u.y>a&&(a=u.y)}return new o(this.pos.clone().add(new t(i,r)),s-i,a-r).toPolygon()},y.Box=o,o.prototype.toPolygon=o.prototype.toPolygon=function(){var e=this.pos,o=this.w,i=this.h;return new n(new t(e.x,e.y),[new t,new t(o,0),new t(o,i),new t(0,i)])},y.Response=i,i.prototype.clear=i.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this};for(var v=[],d=0;d<10;d++)v.push(new t);for(var x=[],d=0;d<5;d++)x.push([]);var m=new i,g=new o(new t,1e-6,1e-6).toPolygon();y.isSeparatingAxis=s;var b=-1,w=0,P=1;return y.pointInCircle=p,y.pointInPolygon=u,y.testCircleCircle=h,y.testPolygonCircle=c,y.testCirclePolygon=l,y.testPolygonPolygon=f,y})},function(t,e,n){"use strict";function o(t,e){var n=e.x-t.x,o=e.y-t.y;return Math.atan2(o,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.NULL_VECTOR={x:0,y:0},e.NAN_VECTOR={x:NaN,y:NaN},e.angleBetweenTwoVectors=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.position={x:NaN,y:NaN},this.angle=0,this.size={x:0,y:0},this.speed={x:0,y:0},this.maxSpeedModule=0,this.focusPoint={x:NaN,y:NaN}}return t.prototype.setPosition=function(t,e){this.position.x=t,this.position.y=e},t.prototype.setAngle=function(t){},t.prototype.setMovementDirection=function(t,e){this.speed.x=t*this.maxSpeedModule,this.speed.y=e*this.maxSpeedModule},t.prototype.setFocusPoint=function(t,e){},t}();e.default=o},function(t,e,n){var o=n(7);"string"==typeof o&&(o=[[t.i,o,""]]);var i={};i.transform=void 0;n(9)(o,i);o.locals&&(t.exports=o.locals)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=1/Math.sqrt(2),r={x:0,y:-1},s={x:0,y:1},a={x:-1,y:0},p={x:1,y:0},u={x:-i,y:-i},h={x:i,y:-i},c={x:-i,y:i},l={x:i,y:i},f={NX:r,SX:s,XW:a,XE:p,NW:u,NE:h,SW:c,SE:l,XX:o.NULL_VECTOR},y={FORWARD:"w",BACKWARD:"s",LEFT:"a",RIGHT:"d"},v=function(){function t(t){void 0===t&&(t=y),this.keyBindings=t,this.entity=null,this.currentKeys=[],this.currentKeySet=new Set,this.keyboardListener=this.keyboardListener.bind(this),this.mouseListener=this.mouseListener.bind(this)}return t.prototype.setEntity=function(t){if(this.entity)throw new Error("Entity already set for Controls");this.entity=t,window.addEventListener("keydown",this.keyboardListener),window.addEventListener("keyup",this.keyboardListener)},t.prototype.setCanvas=function(t){t.addEventListener("mousemove",this.mouseListener)},t.prototype.keyboardListener=function(t){var e=t.key,n=t.type;if("keydown"!==n||this.currentKeySet.has(e)){if("keyup"===n&&this.currentKeySet.delete(e)){var o=this.currentKeys.indexOf(e);this.currentKeys.splice(o,1)}}else this.currentKeys.push(e),this.currentKeySet.add(e);this.updateCurrentDirection()},t.prototype.mouseListener=function(t){"mousemove"===t.type&&this.entity.setFocusPoint(t.offsetX,t.offsetY)},t.prototype.updateCurrentDirection=function(){var t=this.keyBindings,e=t.FORWARD,n=t.BACKWARD,o=t.LEFT,i=t.RIGHT,r="X",s="X";this.currentKeys.forEach(function(t){switch(t){case e:s="N";break;case n:s="S";break;case o:r="W";break;case i:r="E"}});var a=f[s+r];this.entity.setMovementDirection(a.x,a.y)},t}();e.default=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),i=n(13),r=n(14),s=n(12),a=new o.Response,p=function(){function t(){this.map=new s.default,this.entities=[],this.tickrate=128,this.loopInterval=1e3/this.tickrate,this.player=null}return t.prototype.start=function(){if(this.loop!==t.prototype.loop)throw new Error("Game already started");this.loadMap(),this.startRound(),this.loop=this.loop.bind(this),this.loop()},t.prototype.loadMap=function(){this.walls=this.map.walls.map(function(t){return new r.default(t)}),(t=this.entities).push.apply(t,this.walls);var t},t.prototype.startRound=function(){var t=new i.default,e=this.map.spawnPoints[0];t.setPosition(e.x,e.y),this.entities.push(t),this.player=t,this.player.fov.setMap(this.map),this.player.fov.update()},t.prototype.loop=function(){this.entities.forEach(this.loopEntity,this),setTimeout(this.loop,this.loopInterval)},t.prototype.loopEntity=function(t){this.moveEntity(t)},t.prototype.moveEntity=function(t){var e=t.speed;if(e.x||e.y){var n=t.position,o=n.x+e.x/this.tickrate,i=n.y+e.y/this.tickrate;o=Math.max(o,t.size.x),o=Math.min(o,this.map.width-t.size.x),i=Math.max(i,t.size.y),i=Math.min(i,this.map.height-t.size.y),t.setPosition(o,i),this.checkEntityCollisions(t)}},t.prototype.checkEntityCollisions=function(t){var e=!1,n=0;do{n+=1,e=this.entities.some(function(e){if(e!==t){var n=o.testPolygonCircle(e.sat,t.sat,a)&&Boolean(a.overlap);return n&&t.setPosition(t.position.x+a.overlapV.x,t.position.y+a.overlapV.y),a.clear(),n}})}while(e&&n<10)},t}();e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.prototype.start=function(t){if(this.game)throw new Error("Renderer is already rendering a Game");this.game=t;var e=document.createElement("canvas");e.width=this.game.map.width,e.height=this.game.map.height,this.canvas=e,this.canvasContext=e.getContext("2d"),this.render=this.render.bind(this),this.render()},t.prototype.render=function(){this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.game.walls.forEach(this.drawEntity,this),this.drawFov(),this.drawEntity(this.game.player),window.requestAnimationFrame(this.render)},t.prototype.drawEntity=function(t){var e=t.canvas,n=t.position,o=t.angle,i=this.canvasContext,r=this.game.map,s=(r.width,r.height,n.x),a=n.y;i.translate(s,a),i.rotate(o),i.drawImage(e,-e.width/2,-e.height/2),i.rotate(-o),i.translate(-s,-a)},t.prototype.drawFov=function(){var t=this.game.player.fov.intersects,e=this.canvasContext,n=e.globalCompositeOperation,o=e.lineWidth,i=e.fillStyle;e.beginPath(),e.moveTo(t[0].x,t[0].y);for(var r=1;r<t.length;r+=1){var s=t[r];e.lineTo(s.x,s.y)}e.lineTo(t[0].x,t[0].y),e.lineWidth=10,e.globalCompositeOperation="destination-in",e.stroke(),e.fillStyle="black",e.globalCompositeOperation="destination-over",e.fillRect(0,0,this.canvas.width,this.canvas.height),e.beginPath(),e.moveTo(t[0].x,t[0].y);for(var r=1;r<t.length;r+=1){var s=t[r];e.lineTo(s.x,s.y)}e.globalCompositeOperation="destination-out",e.fill(),e.globalCompositeOperation=n,e.lineWidth=o,e.fillStyle=i},t.prototype.drawDebugFov=function(t){var e=t.fov.intersects,n=this.canvasContext;n.fillStyle="#dd3838",n.beginPath(),n.moveTo(e[0].x,e[0].y);for(var o=1;o<e.length;o+=1){var i=e[o];n.lineTo(i.x,i.y)}n.fill(),n.strokeStyle="#f55";for(var o=0;o<e.length;o+=1){var i=e[o];n.beginPath(),n.moveTo(t.position.x,t.position.y),n.lineTo(i.x,i.y),n.stroke()}},t}();e.default=o},function(t,e,n){e=t.exports=n(8)(void 0),e.push([t.i,"body{margin:0;overflow:hidden;background:gray;text-align:center;position:absolute;height:100%;width:100%;display:flex}canvas{background:#e0e0e0;margin:auto}",""])},function(t,e){function n(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var r=o(i);return[n].concat(i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"})).concat([r]).join("\n")}return[n].join("\n")}function o(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var o=n(e,t);return e[2]?"@media "+e[2]+"{"+o+"}":o}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(o[r]=!0)}for(i=0;i<t.length;i++){var s=t[i];"number"==typeof s[0]&&o[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(t,e,n){function o(t,e){for(var n=0;n<t.length;n++){var o=t[n],i=y[o.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](o.parts[r]);for(;r<o.parts.length;r++)i.parts.push(h(o.parts[r],e))}else{for(var s=[],r=0;r<o.parts.length;r++)s.push(h(o.parts[r],e));y[o.id]={id:o.id,refs:1,parts:s}}}}function i(t,e){for(var n=[],o={},i=0;i<t.length;i++){var r=t[i],s=e.base?r[0]+e.base:r[0],a=r[1],p=r[2],u=r[3],h={css:a,media:p,sourceMap:u};o[s]?o[s].parts.push(h):n.push(o[s]={id:s,parts:[h]})}return n}function r(t,e){var n=d(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=g[g.length-1];if("top"===t.insertAt)o?o.nextSibling?n.insertBefore(e,o.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),g.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function s(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=g.indexOf(t);e>=0&&g.splice(e,1)}function a(t){var e=document.createElement("style");return t.attrs.type="text/css",u(e,t.attrs),r(t,e),e}function p(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",u(e,t.attrs),r(t,e),e}function u(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function h(t,e){var n,o,i,r;if(e.transform&&t.css){if(!(r=e.transform(t.css)))return function(){};t.css=r}if(e.singleton){var u=m++;n=x||(x=a(e)),o=c.bind(null,n,u,!1),i=c.bind(null,n,u,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=p(e),o=f.bind(null,n,e),i=function(){s(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(e),o=l.bind(null,n),i=function(){s(n)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else i()}}function c(t,e,n,o){var i=n?"":o.css;if(t.styleSheet)t.styleSheet.cssText=w(e,i);else{var r=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}function l(t,e){var n=e.css,o=e.media;if(o&&t.setAttribute("media",o),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function f(t,e,n){var o=n.css,i=n.sourceMap,r=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||r)&&(o=b(o)),i&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([o],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}var y={},v=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),d=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t.call(this,n)),e[n]}}(function(t){return document.querySelector(t)}),x=null,m=0,g=[],b=n(10);t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},e.attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||(e.singleton=v()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=i(t,e);return o(n,e),function(t){for(var r=[],s=0;s<n.length;s++){var a=n[s],p=y[a.id];p.refs--,r.push(p)}if(t){o(i(t,e),e)}for(var s=0;s<r.length;s++){var p=r[s];if(0===p.refs){for(var u=0;u<p.parts.length;u++)p.parts[u]();delete y[p.id]}}}};var w=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,o=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i))return t;var r;return r=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(r)+")"})}},function(t,e,n){"use strict";function o(t,e){var n=t.a.x,o=t.a.y,i=t.b.x-t.a.x,r=t.b.y-t.a.y,s=e.a.x,a=e.a.y,p=e.b.x-e.a.x,u=e.b.y-e.a.y,h=Math.sqrt(i*i+r*r),c=Math.sqrt(p*p+u*u);if(i/h==p/c&&r/h==u/c)return null;var l=(i*(a-o)+r*(n-s))/(p*r-u*i),f=(s+p*l-n)/i;return f<0?null:l<0||l>1?null:{x:n+i*f,y:o+r*f,param:f}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=(Math.PI,Math.PI/4),s=function(){function t(t){this.entity=t}return t.prototype.setMap=function(t){this.map=t},t.prototype.update=function(){var t=this,e=this.map.wallPoints,n=this.entity.angle-r,s=this.entity.angle+r,a=this.entity.angle+(this.entity.angle<0?Math.PI:-Math.PI),p=[n,s];e.forEach(function(e,o){var r=i.angleBetweenTwoVectors(t.entity.position,e);a>0&&r>a?r-=2*Math.PI:a<0&&r<a&&(r+=2*Math.PI),r<=s&&r>=n&&p.push(r-1e-5,r,r+1e-5)});var u=[{x:this.entity.position.x,y:this.entity.position.y,angle:n-1e-5},{x:this.entity.position.x,y:this.entity.position.y,angle:s+1e-5}];p.forEach(function(e){var n=Math.cos(e),i=Math.sin(e),r=t.entity.position,s={a:{x:r.x,y:r.y},b:{x:r.x+n,y:r.y+i}},a=null;t.map.wallSegments.forEach(function(t){var e=o(s,t);e&&(!a||e.param<a.param)&&(a=e)}),a&&(a.angle=e,u.push(a))}),u.sort(function(t,e){return t.angle-e.angle}),this.intersects=u},t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){var t=this;this.height=800,this.width=800,this.spawnPoints=[{x:50,y:50}],this.walls=[[{x:400,y:400},{x:600,y:400},{x:500,y:450}],[{x:100,y:0},{x:120,y:0},{x:120,y:200},{x:100,y:200}],[{x:0,y:200},{x:200,y:250},{x:0,y:250}]];var e={x:0,y:0},n={x:this.width,y:0},o={x:this.width,y:this.height},i={x:0,y:this.height};this.wallPoints=[e,n,o,i],this.walls.forEach(function(e){(n=t.wallPoints).push.apply(n,e);var n}),this.wallSegments=[{a:e,b:n},{a:n,b:o},{a:o,b:i},{a:i,b:e}],this.walls.forEach(function(e){for(var n=1;n<e.length;n+=1)t.wallSegments.push({a:e[n-1],b:e[n]});t.wallSegments.push({a:e[e.length-1],b:e[0]})})}return t}();e.default=o},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(1),s=n(2),a=n(11),p=function(t){function e(){var e=t.call(this)||this;return e.radius=10,e.maxSpeedModule=250,e.color="green",e.size.x=e.radius,e.size.y=e.radius,e.sat=new i.Circle(new i.Vector(e.position.x,e.position.y),e.radius),e.fov=new a.default(e),e}return o(e,t),e.prototype.setAngleByFocusPoint=function(){if(!Number.isNaN(this.focusPoint.x)){var t=r.angleBetweenTwoVectors(this.position,this.focusPoint);this.setAngle(t)}},e.prototype.setPosition=function(e,n){t.prototype.setPosition.call(this,e,n),this.sat.pos.x=e,this.sat.pos.y=n,this.setAngleByFocusPoint()},e.prototype.setAngle=function(t){this.angle=t,this.fov.update()},e.prototype.setFocusPoint=function(t,e){this.focusPoint.x=t,this.focusPoint.y=e,this.setAngleByFocusPoint()},Object.defineProperty(e.prototype,"canvas",{get:function(){var t=this._canvas;if(!t){var e=this,n=e.radius;e.position;t=document.createElement("canvas"),t.width=2*this.radius,t.height=2*this.radius;var o=t.getContext("2d");o.beginPath(),o.arc(n,n,n,0,2*Math.PI,!1),o.fillStyle=this.color,o.fill(),o.beginPath(),o.moveTo(2*n,n),o.lineTo(n,n),o.strokeStyle="black",o.lineWidth=3,o.stroke(),this._canvas=t}return this._canvas},enumerable:!0,configurable:!0}),e}(s.default);e.default=p},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(2),s=function(t){function e(e){var n=t.call(this)||this,o=e.map(function(t){return t.x}),r=e.map(function(t){return t.y});return n.minX=Math.min.apply(Math,o),n.maxX=Math.max.apply(Math,o),n.minY=Math.min.apply(Math,r),n.maxY=Math.max.apply(Math,r),n.position.x=(n.maxX+n.minX)/2,n.position.y=(n.maxY+n.minY)/2,n.size.x=n.maxX-n.minX,n.size.y=n.maxY-n.minY,n.points=e,n.sat=new i.Polygon(new i.Vector,e.map(function(t){return new i.Vector(t.x,t.y)})),n}return o(e,t),Object.defineProperty(e.prototype,"canvas",{get:function(){var t=this,e=this._canvas;if(!e){e=document.createElement("canvas"),e.width=this.size.x,e.height=this.size.y;var n=e.getContext("2d");n.beginPath(),n.moveTo(this.points[0].x-this.minX,this.points[0].y-this.minY),this.points.forEach(function(e){return n.lineTo(e.x-t.minX,e.y-t.minY)}),n.fillStyle="#AAA",n.fill(),this._canvas=e}return this._canvas},enumerable:!0,configurable:!0}),e}(r.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),i=n(6),r=n(4);n(3);var s=new o.default;s.start();var a=new r.default;a.setEntity(s.player);var p=new i.default;p.start(s),a.setCanvas(p.canvas),document.body.appendChild(p.canvas)}]);