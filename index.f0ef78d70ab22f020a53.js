!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=15)}([function(t,e,n){var o,r;/** @preserve SAT.js - Version 0.6.0 - Copyright 2012 - 2016 - Jim Riecken <jimr@jimr.ca> - released under the MIT License. https://github.com/jriecken/sat-js */
!function(i,s){"use strict";o=s,void 0!==(r="function"==typeof o?o.call(e,n,e,t):o)&&(t.exports=r)}(0,function(){"use strict";function t(t,e){this.x=t||0,this.y=e||0}function e(e,n){this.pos=e||new t,this.r=n||0}function n(e,n){this.pos=e||new t,this.angle=0,this.offset=new t,this.setPoints(n||[])}function o(e,n,o){this.pos=e||new t,this.w=n||0,this.h=o||0}function r(){this.a=null,this.b=null,this.overlapN=new t,this.overlapV=new t,this.clear()}function i(t,e,n){for(var o=Number.MAX_VALUE,r=-Number.MAX_VALUE,i=t.length,s=0;s<i;s++){var a=t[s].dot(e);a<o&&(o=a),a>r&&(r=a)}n[0]=o,n[1]=r}function s(t,e,n,o,r,s){var a=x.pop(),p=x.pop(),u=v.pop().copy(e).sub(t),c=u.dot(r);if(i(n,r,a),i(o,r,p),p[0]+=c,p[1]+=c,a[0]>p[1]||p[0]>a[1])return v.push(u),x.push(a),x.push(p),!0;if(s){var h=0;if(a[0]<p[0])if(s.aInB=!1,a[1]<p[1])h=a[1]-p[0],s.bInA=!1;else{var l=a[1]-p[0],f=p[1]-a[0];h=l<f?l:-f}else if(s.bInA=!1,a[1]>p[1])h=a[0]-p[1],s.aInB=!1;else{var l=a[1]-p[0],f=p[1]-a[0];h=l<f?l:-f}var y=Math.abs(h);y<s.overlap&&(s.overlap=y,s.overlapN.copy(r),h<0&&s.overlapN.reverse())}return v.push(u),x.push(a),x.push(p),!1}function a(t,e){var n=t.len2(),o=e.dot(t);return o<0?b:o>n?P:w}function p(t,e){var n=v.pop().copy(t).sub(e.pos),o=e.r*e.r,r=n.len2();return v.push(n),r<=o}function u(t,e){g.pos.copy(t),m.clear();var n=f(g,e,m);return n&&(n=m.aInB),n}function c(t,e,n){var o=v.pop().copy(e.pos).sub(t.pos),r=t.r+e.r,i=r*r,s=o.len2();if(s>i)return v.push(o),!1;if(n){var a=Math.sqrt(s);n.a=t,n.b=e,n.overlap=r-a,n.overlapN.copy(o.normalize()),n.overlapV.copy(o).scale(n.overlap),n.aInB=t.r<=e.r&&a<=e.r-t.r,n.bInA=e.r<=t.r&&a<=t.r-e.r}return v.push(o),!0}function h(t,e,n){for(var o=v.pop().copy(e.pos).sub(t.pos),r=e.r,i=r*r,s=t.calcPoints,p=s.length,u=v.pop(),c=v.pop(),h=0;h<p;h++){var l=h===p-1?0:h+1,f=0===h?p-1:h-1,y=0,d=null;u.copy(t.edges[h]),c.copy(o).sub(s[h]),n&&c.len2()>i&&(n.aInB=!1);var x=a(u,c);if(x===b){u.copy(t.edges[f]);var m=v.pop().copy(o).sub(s[f]);if((x=a(u,m))===P){var g=c.len();if(g>r)return v.push(o),v.push(u),v.push(c),v.push(m),!1;n&&(n.bInA=!1,d=c.normalize(),y=r-g)}v.push(m)}else if(x===P){if(u.copy(t.edges[l]),c.copy(o).sub(s[l]),(x=a(u,c))===b){var g=c.len();if(g>r)return v.push(o),v.push(u),v.push(c),!1;n&&(n.bInA=!1,d=c.normalize(),y=r-g)}}else{var w=u.perp().normalize(),g=c.dot(w),M=Math.abs(g);if(g>0&&M>r)return v.push(o),v.push(w),v.push(c),!1;n&&(d=w,y=r-g,(g>=0||y<2*r)&&(n.bInA=!1))}d&&n&&Math.abs(y)<Math.abs(n.overlap)&&(n.overlap=y,n.overlapN.copy(d))}return n&&(n.a=t,n.b=e,n.overlapV.copy(n.overlapN).scale(n.overlap)),v.push(o),v.push(u),v.push(c),!0}function l(t,e,n){var o=h(e,t,n);if(o&&n){var r=n.a,i=n.aInB;n.overlapN.reverse(),n.overlapV.reverse(),n.a=n.b,n.b=r,n.aInB=n.bInA,n.bInA=i}return o}function f(t,e,n){for(var o=t.calcPoints,r=o.length,i=e.calcPoints,a=i.length,p=0;p<r;p++)if(s(t.pos,e.pos,o,i,t.normals[p],n))return!1;for(var p=0;p<a;p++)if(s(t.pos,e.pos,o,i,e.normals[p],n))return!1;return n&&(n.a=t,n.b=e,n.overlapV.copy(n.overlapN).scale(n.overlap)),!0}var y={};y.Vector=t,y.V=t,t.prototype.copy=t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.clone=t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.perp=t.prototype.perp=function(){var t=this.x;return this.x=this.y,this.y=-t,this},t.prototype.rotate=t.prototype.rotate=function(t){var e=this.x,n=this.y;return this.x=e*Math.cos(t)-n*Math.sin(t),this.y=e*Math.sin(t)+n*Math.cos(t),this},t.prototype.reverse=t.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.normalize=t.prototype.normalize=function(){var t=this.len();return t>0&&(this.x=this.x/t,this.y=this.y/t),this},t.prototype.add=t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.sub=t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.scale=t.prototype.scale=function(t,e){return this.x*=t,this.y*=e||t,this},t.prototype.project=t.prototype.project=function(t){var e=this.dot(t)/t.len2();return this.x=e*t.x,this.y=e*t.y,this},t.prototype.projectN=t.prototype.projectN=function(t){var e=this.dot(t);return this.x=e*t.x,this.y=e*t.y,this},t.prototype.reflect=t.prototype.reflect=function(t){var e=this.x,n=this.y;return this.project(t).scale(2),this.x-=e,this.y-=n,this},t.prototype.reflectN=t.prototype.reflectN=function(t){var e=this.x,n=this.y;return this.projectN(t).scale(2),this.x-=e,this.y-=n,this},t.prototype.dot=t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.len2=t.prototype.len2=function(){return this.dot(this)},t.prototype.len=t.prototype.len=function(){return Math.sqrt(this.len2())},y.Circle=e,e.prototype.getAABB=e.prototype.getAABB=function(){var e=this.r;return new o(this.pos.clone().sub(new t(e,e)),2*e,2*e).toPolygon()},y.Polygon=n,n.prototype.setPoints=n.prototype.setPoints=function(e){if(!this.points||this.points.length!==e.length){var n,o=this.calcPoints=[],r=this.edges=[],i=this.normals=[];for(n=0;n<e.length;n++)o.push(new t),r.push(new t),i.push(new t)}return this.points=e,this._recalc(),this},n.prototype.setAngle=n.prototype.setAngle=function(t){return this.angle=t,this._recalc(),this},n.prototype.setOffset=n.prototype.setOffset=function(t){return this.offset=t,this._recalc(),this},n.prototype.rotate=n.prototype.rotate=function(t){for(var e=this.points,n=e.length,o=0;o<n;o++)e[o].rotate(t);return this._recalc(),this},n.prototype.translate=n.prototype.translate=function(t,e){for(var n=this.points,o=n.length,r=0;r<o;r++)n[r].x+=t,n[r].y+=e;return this._recalc(),this},n.prototype._recalc=function(){var t,e=this.calcPoints,n=this.edges,o=this.normals,r=this.points,i=this.offset,s=this.angle,a=r.length;for(t=0;t<a;t++){var p=e[t].copy(r[t]);p.x+=i.x,p.y+=i.y,0!==s&&p.rotate(s)}for(t=0;t<a;t++){var u=e[t],c=t<a-1?e[t+1]:e[0],h=n[t].copy(c).sub(u);o[t].copy(h).perp().normalize()}return this},n.prototype.getAABB=n.prototype.getAABB=function(){for(var e=this.calcPoints,n=e.length,r=e[0].x,i=e[0].y,s=e[0].x,a=e[0].y,p=1;p<n;p++){var u=e[p];u.x<r?r=u.x:u.x>s&&(s=u.x),u.y<i?i=u.y:u.y>a&&(a=u.y)}return new o(this.pos.clone().add(new t(r,i)),s-r,a-i).toPolygon()},y.Box=o,o.prototype.toPolygon=o.prototype.toPolygon=function(){var e=this.pos,o=this.w,r=this.h;return new n(new t(e.x,e.y),[new t,new t(o,0),new t(o,r),new t(0,r)])},y.Response=r,r.prototype.clear=r.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this};for(var v=[],d=0;d<10;d++)v.push(new t);for(var x=[],d=0;d<5;d++)x.push([]);var m=new r,g=new o(new t,1e-6,1e-6).toPolygon();y.isSeparatingAxis=s;var b=-1,w=0,P=1;return y.pointInCircle=p,y.pointInPolygon=u,y.testCircleCircle=c,y.testPolygonCircle=h,y.testCirclePolygon=l,y.testPolygonPolygon=f,y})},function(t,e,n){"use strict";function o(t,e){var n=e.x-t.x,o=e.y-t.y;return Math.atan2(o,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.NULL_VECTOR={x:0,y:0},e.NAN_VECTOR={x:NaN,y:NaN},e.angleBetweenTwoVectors=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.position={x:NaN,y:NaN},this.angle=0,this.size={x:0,y:0},this.speed={x:0,y:0},this.maxSpeedModule=0,this.focusPoint={x:NaN,y:NaN}}return t.prototype.setPosition=function(t,e){this.position.x=t,this.position.y=e},t.prototype.setAngle=function(t){},t.prototype.setMovementDirection=function(t,e){this.speed.x=t*this.maxSpeedModule,this.speed.y=e*this.maxSpeedModule},t.prototype.setFocusPoint=function(t,e){},t}();e.default=o},function(t,e,n){var o=n(7);"string"==typeof o&&(o=[[t.i,o,""]]);var r={};r.transform=void 0;n(9)(o,r);o.locals&&(t.exports=o.locals)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=1/Math.sqrt(2),i={x:0,y:-1},s={x:0,y:1},a={x:-1,y:0},p={x:1,y:0},u={x:-r,y:-r},c={x:r,y:-r},h={x:-r,y:r},l={x:r,y:r},f={NX:i,SX:s,XW:a,XE:p,NW:u,NE:c,SW:h,SE:l,XX:o.NULL_VECTOR},y={FORWARD:"w",BACKWARD:"s",LEFT:"a",RIGHT:"d"},v=function(){function t(t){void 0===t&&(t=y),this.keyBindings=t,this.entity=null,this.currentKeys=[],this.currentKeySet=new Set,this.keyboardListener=this.keyboardListener.bind(this),this.mouseListener=this.mouseListener.bind(this)}return t.prototype.setEntity=function(t){if(this.entity)throw new Error("Entity already set for Controls");this.entity=t,window.addEventListener("keydown",this.keyboardListener),window.addEventListener("keyup",this.keyboardListener)},t.prototype.setCanvas=function(t){t.addEventListener("mousemove",this.mouseListener)},t.prototype.keyboardListener=function(t){var e=t.key,n=t.type;if("keydown"!==n||this.currentKeySet.has(e)){if("keyup"===n&&this.currentKeySet.delete(e)){var o=this.currentKeys.indexOf(e);this.currentKeys.splice(o,1)}}else this.currentKeys.push(e),this.currentKeySet.add(e);this.updateCurrentDirection()},t.prototype.mouseListener=function(t){"mousemove"===t.type&&this.entity.setFocusPoint(t.offsetX,t.offsetY)},t.prototype.updateCurrentDirection=function(){var t=this.keyBindings,e=t.FORWARD,n=t.BACKWARD,o=t.LEFT,r=t.RIGHT,i="X",s="X";this.currentKeys.forEach(function(t){switch(t){case e:s="N";break;case n:s="S";break;case o:i="W";break;case r:i="E"}});var a=f[s+i];this.entity.setMovementDirection(a.x,a.y)},t}();e.default=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(13),i=n(14),s=n(12),a=new o.Response,p=function(){function t(){this.map=new s.default,this.entities=[],this.tickrate=128,this.loopInterval=1e3/this.tickrate,this.player=null}return t.prototype.start=function(){if(this.loop!==t.prototype.loop)throw new Error("Game already started");this.loadMap(),this.startRound(),this.loop=this.loop.bind(this),this.loop()},t.prototype.loadMap=function(){this.walls=this.map.walls.map(function(t){return new i.default(t)}),(t=this.entities).push.apply(t,this.walls);var t},t.prototype.startRound=function(){var t=new r.default,e=this.map.spawnPoints[0];t.setPosition(e.x,e.y),this.entities.push(t),this.player=t,this.player.fov.setMap(this.map),this.player.fov.update()},t.prototype.loop=function(){this.entities.forEach(this.loopEntity,this),setTimeout(this.loop,this.loopInterval)},t.prototype.loopEntity=function(t){this.moveEntity(t)},t.prototype.moveEntity=function(t){var e=t.speed;if(e.x||e.y){var n=t.position,o=n.x+e.x/this.tickrate,r=n.y+e.y/this.tickrate;o=Math.max(o,t.size.x),o=Math.min(o,this.map.width-t.size.x),r=Math.max(r,t.size.y),r=Math.min(r,this.map.height-t.size.y),t.setPosition(o,r),this.checkEntityCollisions(t)}},t.prototype.checkEntityCollisions=function(t){var e=!1,n=0;do{n+=1,e=this.entities.some(function(e){if(e!==t){var n=o.testPolygonCircle(e.sat,t.sat,a)&&Boolean(a.overlap);return n&&t.setPosition(t.position.x+a.overlapV.x,t.position.y+a.overlapV.y),a.clear(),n}})}while(e&&n<10)},t}();e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.prototype.start=function(t){if(this.game)throw new Error("Renderer is already rendering a Game");this.game=t;var e=document.createElement("canvas");e.width=this.game.map.width,e.height=this.game.map.height,this.canvas=e,this.canvasContext=e.getContext("2d"),this.render=this.render.bind(this),this.render()},t.prototype.render=function(){this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawFov(this.game.player),this.game.entities.forEach(this.drawEntity,this),window.requestAnimationFrame(this.render)},t.prototype.drawEntity=function(t){var e=t.canvas,n=t.position,o=t.angle,r=this.canvasContext,i=this.game.map,s=(i.width,i.height,n.x),a=n.y;r.translate(s,a),r.rotate(o),r.drawImage(e,-e.width/2,-e.height/2),r.rotate(-o),r.translate(-s,-a)},t.prototype.drawFov=function(t){var e=t.fov.intersects,n=this.canvasContext;n.fillStyle="#dd3838",n.beginPath(),n.moveTo(e[0].x,e[0].y);for(var o=1;o<e.length;o+=1){var r=e[o];n.lineTo(r.x,r.y)}n.fill(),n.strokeStyle="#f55";for(var i=0;i<e.length;i++){var s=e[i];n.beginPath(),n.moveTo(t.position.x,t.position.y),n.lineTo(s.x,s.y),n.stroke()}},t}();e.default=o},function(t,e,n){e=t.exports=n(8)(void 0),e.push([t.i,"body{margin:0;overflow:hidden;background:gray;text-align:center;position:absolute;height:100%;width:100%;display:flex}canvas{background:#e0e0e0;margin:auto}",""])},function(t,e){function n(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=o(r);return[n].concat(r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"})).concat([i]).join("\n")}return[n].join("\n")}function o(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var o=n(e,t);return e[2]?"@media "+e[2]+"{"+o+"}":o}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(o[i]=!0)}for(r=0;r<t.length;r++){var s=t[r];"number"==typeof s[0]&&o[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(t,e,n){function o(t,e){for(var n=0;n<t.length;n++){var o=t[n],r=y[o.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](o.parts[i]);for(;i<o.parts.length;i++)r.parts.push(c(o.parts[i],e))}else{for(var s=[],i=0;i<o.parts.length;i++)s.push(c(o.parts[i],e));y[o.id]={id:o.id,refs:1,parts:s}}}}function r(t,e){for(var n=[],o={},r=0;r<t.length;r++){var i=t[r],s=e.base?i[0]+e.base:i[0],a=i[1],p=i[2],u=i[3],c={css:a,media:p,sourceMap:u};o[s]?o[s].parts.push(c):n.push(o[s]={id:s,parts:[c]})}return n}function i(t,e){var n=d(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=g[g.length-1];if("top"===t.insertAt)o?o.nextSibling?n.insertBefore(e,o.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),g.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function s(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=g.indexOf(t);e>=0&&g.splice(e,1)}function a(t){var e=document.createElement("style");return t.attrs.type="text/css",u(e,t.attrs),i(t,e),e}function p(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",u(e,t.attrs),i(t,e),e}function u(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function c(t,e){var n,o,r,i;if(e.transform&&t.css){if(!(i=e.transform(t.css)))return function(){};t.css=i}if(e.singleton){var u=m++;n=x||(x=a(e)),o=h.bind(null,n,u,!1),r=h.bind(null,n,u,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=p(e),o=f.bind(null,n,e),r=function(){s(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(e),o=l.bind(null,n),r=function(){s(n)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else r()}}function h(t,e,n,o){var r=n?"":o.css;if(t.styleSheet)t.styleSheet.cssText=w(e,r);else{var i=document.createTextNode(r),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}function l(t,e){var n=e.css,o=e.media;if(o&&t.setAttribute("media",o),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function f(t,e,n){var o=n.css,r=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||i)&&(o=b(o)),r&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var s=new Blob([o],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}var y={},v=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),d=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t.call(this,n)),e[n]}}(function(t){return document.querySelector(t)}),x=null,m=0,g=[],b=n(10);t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},e.attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||(e.singleton=v()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=r(t,e);return o(n,e),function(t){for(var i=[],s=0;s<n.length;s++){var a=n[s],p=y[a.id];p.refs--,i.push(p)}if(t){o(r(t,e),e)}for(var s=0;s<i.length;s++){var p=i[s];if(0===p.refs){for(var u=0;u<p.parts.length;u++)p.parts[u]();delete y[p.id]}}}};var w=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,o=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var r=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(r))return t;var i;return i=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:o+r.replace(/^\.\//,""),"url("+JSON.stringify(i)+")"})}},function(t,e,n){"use strict";function o(t,e){var n=t.a.x,o=t.a.y,r=t.b.x-t.a.x,i=t.b.y-t.a.y,s=e.a.x,a=e.a.y,p=e.b.x-e.a.x,u=e.b.y-e.a.y,c=Math.sqrt(r*r+i*i),h=Math.sqrt(p*p+u*u);if(r/c==p/h&&i/c==u/h)return null;var l=(r*(a-o)+i*(n-s))/(p*i-u*r),f=(s+p*l-n)/r;return f<0?null:l<0||l>1?null:{x:n+r*f,y:o+i*f,param:f}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=function(){function t(t){this.entity=t}return t.prototype.setMap=function(t){this.map=t},t.prototype.update=function(){var t=this,e=this.map.wallPoints,n=[];e.forEach(function(e){var o=r.angleBetweenTwoVectors(t.entity.position,e);n.push(o-1e-5,o,o+1e-5)});var i=[];n.forEach(function(e){var n=Math.cos(e),r=Math.sin(e),s=t.entity.position,a={a:{x:s.x,y:s.y},b:{x:s.x+n,y:s.y+r}},p=null;t.map.wallSegments.forEach(function(t){var e=o(a,t);e&&(!p||e.param<p.param)&&(p=e)}),p&&(p.angle=e,i.push(p))}),i.sort(function(t,e){return t.angle-e.angle}),this.intersects=i},t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){var t=this;this.height=800,this.width=800,this.spawnPoints=[{x:50,y:50}],this.walls=[[{x:400,y:400},{x:600,y:400},{x:500,y:450}],[{x:100,y:0},{x:120,y:0},{x:120,y:200},{x:100,y:200}],[{x:0,y:200},{x:200,y:250},{x:0,y:250}]];var e={x:0,y:0},n={x:this.width,y:0},o={x:this.width,y:this.height},r={x:0,y:this.height};this.wallPoints=[e,n,o,r],this.walls.forEach(function(e){(n=t.wallPoints).push.apply(n,e);var n}),this.wallSegments=[{a:e,b:n},{a:n,b:o},{a:o,b:r},{a:r,b:e}],this.walls.forEach(function(e){for(var n=1;n<e.length;n+=1)t.wallSegments.push({a:e[n-1],b:e[n]});t.wallSegments.push({a:e[e.length-1],b:e[0]})})}return t}();e.default=o},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(1),s=n(2),a=n(11),p=function(t){function e(){var e=t.call(this)||this;return e.radius=10,e.maxSpeedModule=250,e.color="green",e.size.x=e.radius,e.size.y=e.radius,e.sat=new r.Circle(new r.Vector(e.position.x,e.position.y),e.radius),e.fov=new a.default(e),e}return o(e,t),e.prototype.setAngleByFocusPoint=function(){if(!Number.isNaN(this.focusPoint.x)){var t=i.angleBetweenTwoVectors(this.position,this.focusPoint);this.setAngle(t)}},e.prototype.setPosition=function(e,n){t.prototype.setPosition.call(this,e,n),this.sat.pos.x=e,this.sat.pos.y=n,this.setAngleByFocusPoint()},e.prototype.setAngle=function(t){this.angle=t,this.fov.update()},e.prototype.setFocusPoint=function(t,e){this.focusPoint.x=t,this.focusPoint.y=e,this.setAngleByFocusPoint()},Object.defineProperty(e.prototype,"canvas",{get:function(){var t=this._canvas;if(!t){var e=this,n=e.radius;e.position;t=document.createElement("canvas"),t.width=2*this.radius,t.height=2*this.radius;var o=t.getContext("2d");o.beginPath(),o.arc(n,n,n,0,2*Math.PI,!1),o.fillStyle=this.color,o.fill(),o.beginPath(),o.moveTo(2*n,n),o.lineTo(n,n),o.strokeStyle="black",o.lineWidth=3,o.stroke(),this._canvas=t}return this._canvas},enumerable:!0,configurable:!0}),e}(s.default);e.default=p},function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=n(2),s=function(t){function e(e){var n=t.call(this)||this,o=e.map(function(t){return t.x}),i=e.map(function(t){return t.y});return n.minX=Math.min.apply(Math,o),n.maxX=Math.max.apply(Math,o),n.minY=Math.min.apply(Math,i),n.maxY=Math.max.apply(Math,i),n.position.x=(n.maxX+n.minX)/2,n.position.y=(n.maxY+n.minY)/2,n.size.x=n.maxX-n.minX,n.size.y=n.maxY-n.minY,n.points=e,n.sat=new r.Polygon(new r.Vector,e.map(function(t){return new r.Vector(t.x,t.y)})),n}return o(e,t),Object.defineProperty(e.prototype,"canvas",{get:function(){var t=this,e=this._canvas;if(!e){e=document.createElement("canvas"),e.width=this.size.x,e.height=this.size.y;var n=e.getContext("2d");n.beginPath(),n.moveTo(this.points[0].x-this.minX,this.points[0].y-this.minY),this.points.forEach(function(e){return n.lineTo(e.x-t.minX,e.y-t.minY)}),n.fillStyle="#AAA",n.fill(),this._canvas=e}return this._canvas},enumerable:!0,configurable:!0}),e}(i.default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),r=n(6),i=n(4);n(3);var s=new o.default;s.start();var a=new i.default;a.setEntity(s.player);var p=new r.default;p.start(s),a.setCanvas(p.canvas),document.body.appendChild(p.canvas)}]);